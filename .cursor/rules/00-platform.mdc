---
alwaysApply: true
---

# ğŸš€ Nexus Platform - Modulare SaaS Architektur

*Willkommen! Dies ist eine modulare SaaS-Plattform mit Symfony Bundles und React Packages.*

## ğŸ¯ Die Architektur

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LAYER 3: PRODUCTS (Deployable Apps)                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚  EasyBGM             â”‚  â”‚  Future Product X    â”‚                â”‚
â”‚  â”‚  (Backend+Frontend)  â”‚  â”‚                      â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  LAYER 2: REUSABLE MODULES                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚  Survey  â”‚ â”‚   Chat   â”‚ â”‚ AI Buddy â”‚ â”‚    HR    â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  LAYER 1: PLATFORM FOUNDATION (Best Practice Basis)                 â”‚
â”‚  Auth â”‚ Tenant â”‚ Geo â”‚ Billing â”‚ Notifications â”‚ Settings          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ’¡ Foundation = Best Practice Basis (NICHT minimal!)

Foundation ist **kein minimalistisches Skelett**, sondern eine **vollstÃ¤ndige, erprobte Basis** fÃ¼r professionelle SaaS-Anwendungen:

| Aspekt | Bedeutung |
|--------|-----------|
| **VollstÃ¤ndig** | User mit Avatar, OAuth, AI-Config - alles was jedes Produkt braucht |
| **Best Practice** | BewÃ¤hrte Patterns aus der Praxis, nicht theoretisch minimal |
| **Produktionsreif** | Multi-Tenancy, Billing, Notifications - alles von Anfang an |
| **Wiederverwendbar** | Produkte erben eine solide Basis, kein Rad neu erfinden |

**Beispiel User-Entity:**
```php
// Foundation User hat ALLES was Produkte brauchen:
- id, email, password, firstName, lastName (Basis)
- avatar (Profil)
- googleId, appleId (OAuth)
- isAiAgent, skills, geminiModel (AI-Features)
- isActive, createdAt, updatedAt (Status)
```

**Regel:** Wenn ein Feature in MEHREREN Produkten gebraucht wird â†’ gehÃ¶rt es in Foundation.

## ğŸ—ï¸ GOLDENE ARCHITEKTUR-REGEL: Generisch + Erweiterung

> **Foundation/Module = Generische Basisversion**
> **Product = Erbt, erweitert, Ã¼berschreibt sauber**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FOUNDATION (platform-ui)                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  DashboardLayout (generisch)                                 â”‚   â”‚
â”‚  â”‚  - Sidebar, Header, Content Area                             â”‚   â”‚
â”‚  â”‚  - navItems als PROP (nicht hardcoded!)                      â”‚   â”‚
â”‚  â”‚  - Slots fÃ¼r Product-spezifische Erweiterungen               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  PRODUCT (EasyBGM)                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  extends DashboardLayout                                     â”‚   â”‚
â”‚  â”‚  - navConfig mit BGM-spezifischer Navigation                 â”‚   â”‚
â”‚  â”‚  - BGM-spezifische Hooks (useBgmStatus, etc.)                â”‚   â”‚
â”‚  â”‚  - Ãœberschreibt/erweitert nur was nÃ¶tig ist                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Konkrete Regeln:**

| Was | Foundation | Product |
|-----|------------|---------|
| **Layouts** | Generisches Skelett mit Slots | FÃ¼llt Slots, konfiguriert |
| **Navigation** | `navItems` als Prop/Config | Definiert eigene navItems |
| **Hooks** | Generische (useAuth, useSubscription) | Produkt-spezifische (useBgmStatus) |
| **Components** | Wiederverwendbare UI-Primitive | Produkt-spezifische Zusammenstellungen |
| **Theme** | Basis-Theme mit Variablen | Ãœberschreibt Farben/Schriften |

**NIEMALS in Foundation:**
- Produkt-spezifische Navigation (BGM-Phasen)
- Produkt-spezifische Hooks (useBgmStatus, useCopsoq)
- Hardcodierte Pfade zu Produkt-Features
- Produkt-spezifische Texte/Ãœbersetzungen

**Pattern fÃ¼r Erweiterung:**
```tsx
// Foundation: Generisches Layout
export function DashboardLayout({ navItems, children, slots }: DashboardLayoutProps) {
  return (
    <LayoutShell>
      <Sidebar navItems={navItems} />
      {slots?.header}
      <Content>{children}</Content>
    </LayoutShell>
  );
}

// Product: Konfiguriert das Layout
import { DashboardLayout } from '@till-kubelke/platform-ui';
import { bgmNavItems } from './nav-config';

export function EasyBgmLayout({ children }) {
  return (
    <DashboardLayout 
      navItems={bgmNavItems}
      slots={{ header: <BgmProgressHeader /> }}
    >
      {children}
    </DashboardLayout>
  );
}
```

## ğŸ”— Dependency Rules (WICHTIG!)

```
âœ… ERLAUBT                         âŒ VERBOTEN
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Product â†’ App â†’ Module â†’ Found.   Module â†’ Module (horizontal)
App â†’ Module                       Foundation â†’ Module (nach oben)
App â†’ Foundation                   Module â†’ App (nach oben)
Module â†’ Foundation                Foundation â†’ App (nach oben)
```

**Goldene Regel:** Immer nur nach UNTEN abhÃ¤ngen, NIE nach oben oder zur Seite!

## ğŸ“ Repository-Struktur

| Repository | Layer | Namespace |
|------------|-------|-----------|
| `till-kubelke-platform-foundation` | 1 | `TillKubelke\PlatformFoundation\` |
| `till-kubelke-module-survey` | 2 | `TillKubelke\ModuleSurvey\` |
| `till-kubelke-module-chat` | 2 | `TillKubelke\ModuleChat\` |
| `till-kubelke-module-ai-buddy` | 2 | `TillKubelke\ModuleAiBuddy\` |
| `till-kubelke-module-hr-integration` | 2 | `TillKubelke\ModuleHrIntegration\` |
| `till-kubelke-app-easybgm` | 3 | `TillKubelke\AppEasyBgm\` |
| `till-kubelke-platform-ui` | 1 | `@till-kubelke/platform-ui` |

## ğŸ˜ Bundle-Konventionen

### Namespace-Pattern
```php
// Layer 1
namespace TillKubelke\PlatformFoundation\Auth\Controller;
namespace TillKubelke\PlatformFoundation\Tenant\Entity;

// Layer 2
namespace TillKubelke\ModuleSurvey\Controller;
namespace TillKubelke\ModuleChat\Entity;

// Layer 3
namespace TillKubelke\AppEasyBgm\Controller;
```

### Bundle-Ordnerstruktur
```
till-kubelke-module-xxx/
â”œâ”€â”€ composer.json
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ XxxModuleBundle.php
â”‚   â”œâ”€â”€ Controller/
â”‚   â”œâ”€â”€ Entity/
â”‚   â”œâ”€â”€ Service/
â”‚   â””â”€â”€ Repository/
â”œâ”€â”€ Resources/
â”‚   â””â”€â”€ config/
â”‚       â””â”€â”€ services.yaml
â””â”€â”€ Tests/
```

## ğŸš€ Development Commands

```bash
./run.sh start      # Alles starten
./run.sh stop       # Alles stoppen
./run.sh test       # Tests ausfÃ¼hren
./run.sh status     # Git Status aller Repos
```

## ğŸ“Š Migrations-Status

- Backend: 119 PHP files in 6 Bundles (88% migriert)
- Frontend: 41 TS files im platform-ui Package
